<section class="stack">
  <h1 class="h1">Panel de Administración</h1>
  
  <!-- Dashboard -->
  <div id="dashboardStats" class="card card-pad">
    <h2 class="h2">Cargando estadísticas...</h2>
  </div>

  <!-- Tabs -->
  <div class="card card-pad-sm">
    <div class="row" style="gap: 10px; flex-wrap: wrap;">
      <button class="btn btn-primary" data-tab="productos" onclick="showTab('productos')">Productos</button>
      <button class="btn btn-ghost" data-tab="ventas" onclick="showTab('ventas')">Ventas</button>
      <button class="btn btn-ghost" data-tab="usuarios" onclick="showTab('usuarios')">Usuarios</button>
      <button class="btn btn-ghost" data-tab="stock" onclick="showTab('stock')">Stock Bajo</button>
    </div>
  </div>

  <!-- PRODUCTOS -->
  <div id="tab-productos" class="tab-content">
    <div class="card card-pad">
      <div class="row" style="justify-content: space-between;">
        <h2 class="h2">Gestión de Productos</h2>
        <button class="btn btn-primary" onclick="showCreateProductModal()">+ Crear Producto</button>
      </div>

      <div style="height: 18px;"></div>

      <div id="productsTable" class="stack"></div>
    </div>
  </div>

  <!-- VENTAS -->
  <div id="tab-ventas" class="tab-content hide">
    <div class="card card-pad">
      <h2 class="h2">Historial de Ventas</h2>
      <div style="height: 18px;"></div>
      <div id="salesTable" class="stack"></div>
    </div>
  </div>

  <!-- USUARIOS -->
  <div id="tab-usuarios" class="tab-content hide">
    <div class="card card-pad">
      <h2 class="h2">Usuarios Registrados</h2>
      <div style="height: 18px;"></div>
      <div id="usersTable" class="stack"></div>
    </div>
  </div>

  <!-- STOCK BAJO -->
  <div id="tab-stock" class="tab-content hide">
    <div class="card card-pad">
      <h2 class="h2">Productos con Stock Bajo</h2>
      <div style="height: 18px;"></div>
      <div id="lowStockTable" class="stack"></div>
    </div>
  </div>
</section>

<!-- Modal Crear/Editar Producto -->
<div id="productModal" class="modal hide">
  <div class="modal-backdrop" onclick="closeProductModal()"></div>
  <div class="modal-content card card-pad">
    <h2 class="h2" id="modalTitle">Crear Producto</h2>
    
    <form id="productForm" class="stack" style="margin-top: 18px;">
      <input type="hidden" id="productId" />

      <div class="field">
        <div class="label">Nombre</div>
        <input class="input" type="text" id="prod_nombre" placeholder="Nombre del producto" required>
      </div>

      <div class="field">
        <div class="label">Descripción</div>
        <textarea class="textarea" id="prod_descripcion" placeholder="Descripción del producto"></textarea>
      </div>

      <div class="row">
        <div class="field" style="flex: 1;">
          <div class="label">Precio</div>
          <input class="input" type="number" step="0.01" id="prod_precio" placeholder="0.00" required>
        </div>

        <div class="field" style="flex: 1;">
          <div class="label">Stock</div>
          <input class="input" type="number" id="prod_stock" placeholder="0" required>
        </div>
      </div>

      <div class="row">
        <div class="field" style="flex: 1;">
          <div class="label">Categoría</div>
          <input class="input" type="text" id="prod_categoria" placeholder="alimentos, accesorios, etc.">
        </div>

        <div class="field" style="flex: 1;">
          <div class="label">Color</div>
          <input class="input" type="text" id="prod_color" placeholder="rojo, azul, etc.">
        </div>
      </div>

      <div class="field">
        <div class="label">URL de Imagen</div>
        <input class="input" type="text" id="prod_imagen" placeholder="/images/producto.jpg">
      </div>

      <div class="row" style="gap: 10px;">
        <button class="btn btn-primary" type="submit">Guardar</button>
        <button class="btn btn-ghost" type="button" onclick="closeProductModal()">Cancelar</button>
      </div>
    </form>
  </div>
</div>

<style>
  .modal {
    position: fixed;
    inset: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }
  .modal-backdrop {
    position: absolute;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
  }
  .modal-content {
    position: relative;
    max-width: 600px;
    width: 100%;
    max-height: 90vh;
    overflow-y: auto;
  }
  .tab-content {
    animation: fadeIn 0.3s ease;
  }
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .product-row, .sale-row, .user-row {
    display: flex;
    gap: 12px;
    padding: 14px;
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.5);
    border: 1px solid rgba(193, 178, 169, 0.55);
    align-items: center;
  }
  .product-row:hover, .sale-row:hover, .user-row:hover {
    background: rgba(255, 255, 255, 0.8);
  }
  .row-info {
    flex: 1;
    min-width: 0;
  }
  .row-actions {
    display: flex;
    gap: 8px;
  }
</style>